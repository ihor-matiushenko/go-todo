<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Todo list</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="/static/styles/style.css">
	</head>
	<body>
		<div class="container">
			<h1 class="text-center mb-3 mt-3">Todo list</h1>
			<div class="create-form">
				<form method="post" action="/create/">
					<div class="mb-3">
						<div class="input-group">
							<input type="text" name="title" class="form-control" placeholder="Enter what you want to do" required autofocus>
							<button type="submit" class="btn btn-primary">Submit</button>
						</div>
					</div>
				</form>
			</div>
			<div class="mt-4">
				<ul class="list-group">
					{{range $i, $todo := .}}
						<li class="list-group-item d-flex justify-content-between align-items-center todo-item" role="listitem">
							<div>
								<span class="badge me-1{{if .Done }} bg-secondary{{else}} bg-primary{{end}}">{{ incIdx $i }}</span>
								<span {{if .Done }} class="closed"{{end}}>{{.Title}}</span>
							</div>
							<div>
								<button class="btn btn-primary btn-sm {{if .Done }}disabled{{end}}" data-action="update">Edit</button>
								<a href="/todos/{{.ID}}/close/" class="btn btn-success btn-sm {{if .Done }}disabled{{end}}" role="button">Close</a>
								<a href="/todos/{{.ID}}/reopen/" class="btn btn-warning btn-sm {{if not .Done }}disabled{{end}}" role="button" >Reopen</a>
								<a href="/todos/{{.ID}}/delete/" class="btn btn-danger btn-sm" role="button">Delete</a>
							</div>
							
							<div data-form="update" class="todo-update-form">
								<form method="post" action="/todos/{{.ID}}/update/">
									<div class="input-group">
										<input type="text" name="title" class="form-control" placeholder="New title" value={{.Title}}>
										<button class="btn btn-light" type="button" data-action="cancel">Cancel</button>
										<button class="btn btn-dark" type="submit">Update</button>
									</div>
								</form>
							</div>
						</li>
					{{end}}
				</ul>
			</div>
		</div>

		<script type="text/javascript" src="/static/scripts/script.js"></script>
	</body>
</html>